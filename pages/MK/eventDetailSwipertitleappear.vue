<template>
  <div class="contents"><!-- 레이아웃 설명 /ko/guide/Structure 참고 -->
    <div class="content-wrap">
      <div class="event-detail">
        <div class="e-title type2"><!-- 230110 단순클릭응모형 : type2 클래스 추가 -->
          <h4>앱 다운로드 이벤트</h4>
          <v-layout align-center>
            <div class="cmp-labels">
              <span class="label black">종료</span>
            </div>
            <p>2021.12.07 ~ 2021.12.26</p>
          </v-layout>
        </div>
        <div class="html-area" style="text-align:center;">
          <!-- html 등록 영역 시작 -->
          <div class="pc-event2023-essential">
            <!-- 상단 -->
            <div class="essential-video">
              <video playsinline poster="https://img.thehandsome.com/md/publish/event/20230424_essential/pc/visual.jpg" autoplay="autoplay" muted="muted" loop="loop">
                  <source src="https://img.thehandsome.com/md/publish/event/20230424_essential/pc/visual_video.mp4" type="video/mp4" />
              </video>
            </div>
            <!-- //상단 -->
            <div class="floating">
              <img src="https://img.thehandsome.com/md/publish/event/20230424_essential/pc/img01_fix.jpg" alt="더한섬닷컴 X 벅스 취향 taste, 다양성 variety, 힐링 healing, 아이덴티티 identity 등 공통 키워드를 품고 있는 패션과 음악. 패선의 '더한섬닷컴'과 음악의 '벅스'가 만나 눈과 귀가 모두 즐거운 경험을 지금 확인하세요." />
              <a class="btn" href="https://www.youtube.com/watch?v=7Mul8Zq0mRw">
                <img src="https://img.thehandsome.com/md/publish/event/20230424_essential/pc/PC_essential_floating.gif" alt="essential;" />
              </a>
            </div>
            <!-- CHANGE 01 -->
            <div id="motion01" class="motion-cover">
              <div class="title-img">
                <img src="https://img.thehandsome.com/md/publish/event/20230424_essential/pc/title01.png" alt="change 01 essential; 플레이리스트 / 음악으로 감성 충전 CHANGE! 뭐든 시작하기 좋은 날씨야! 설렘 가득 봄날의 하루 플레이리스트를 지금 꺼내 들어요." />
              </div>
              <a class="btn" href="https://www.youtube.com/watch?v=7Mul8Zq0mRw">essential; 음악 듣기</a>
              <img src="https://img.thehandsome.com/md/publish/event/20230424_essential/pc/title01_img_fix.jpg" alt="essential;" />
            </div>
            <!-- //CHANGE 01 -->
            <!-- CHANGE 02 -->
            <div id="motion02" class="motion-cover">
              <div class="title-img">
                <img src="https://img.thehandsome.com/md/publish/event/20230424_essential/pc/title02.png" alt="change 02 aweSOME life 스타일링 더 산뜻하게 스타일 CHANGE! essential 플리와 함께 꺼내 입어요." />
              </div>
              <a class="btn" href="https://www.thehandsome.com/ko/DP/theMagazineDetail/10004386">더 많은 스타일 보기</a>
              <div id="essential-swiper" class="swiper-container">
                <!-- 보여지는 영역 -->
                <div class="swiper-wrapper">
                  <!-- div class="swiper-slide" 를 추가하면된다 -->
                  <div class="swiper-slide">
                    <img src="https://img.thehandsome.com/md/publish/event/20230424_essential/pc/slide01.jpg" alt="이미지를 지원하지 않습니다." />
                  </div>
                  <div class="swiper-slide">
                    <img src="https://img.thehandsome.com/md/publish/event/20230424_essential/pc/slide02.jpg" alt="이미지를 지원하지 않습니다." />
                  </div>
                  <div class="swiper-slide">
                    <img src="https://img.thehandsome.com/md/publish/event/20230424_essential/pc/slide03.jpg" alt="이미지를 지원하지 않습니다." />
                  </div>
                  <div class="swiper-slide">
                    <img src="https://img.thehandsome.com/md/publish/event/20230424_essential/pc/slide04.jpg" alt="이미지를 지원하지 않습니다." />
                  </div>
                  <div class="swiper-slide">
                    <img src="https://img.thehandsome.com/md/publish/event/20230424_essential/pc/slide05.jpg" alt="이미지를 지원하지 않습니다." />
                  </div>
                  <div class="swiper-slide">
                    <img src="https://img.thehandsome.com/md/publish/event/20230424_essential/pc/slide06.jpg" alt="이미지를 지원하지 않습니다." />
                  </div>
                </div>
                <!-- 페이징 버튼 처리 -->
              </div>
              <img src="https://img.thehandsome.com/md/publish/event/20230424_essential/pc/title02_img_btn.jpg" alt="" />
            </div>
            <!-- //CHANGE 02 -->
            <!-- CHANGE 03 -->
            <div id="motion03" class="motion-cover">
              <div class="title-img">
                <img src="https://img.thehandsome.com/md/publish/event/20230424_essential/pc/title03_fix.png" alt="change 03 Event&GOODS 설레는 지금, 집밖으로 CHANGE! 피크닉에 즐거움을 더해줄 굿즈까지" />
              </div>
              <img src="https://img.thehandsome.com/md/publish/event/20230424_essential/pc/title03_img.jpg" alt="당장 피크닉 가고 싶어지는 더한섬닷컴 X essential; 감성 보틀백 * 화면 및 해상도에 따라 실제 제품과 다를 수 있습니다. * 2가지 디자인 중 랜덤발송 / 증정 이벤트 : 더한섬닷컴 전 상품(아울렛 포함) 40만원 이상 결제 시 선착순 증정 - * ID당 1회, 뷰티/라이프스타일 제외 (400명) / 친구 추천 이벤트 : 추천 받은 친구 가입 후 첫 구매 시 추천인과 친구 모두 선착순 증정 - * ID당 1회, 추천 가입은 1인까지 (100명)" />
            </div>
            <!-- //CHANGE 03 -->
            <!-- CHANGE 04 -->
            <div id="motion04" class="motion-cover">
              <div class="title-img">
                <img src="https://img.thehandsome.com/md/publish/event/20230424_essential/pc/title04.png" alt="change 04 ONLY 더한섬닷컴 벅스 이용권 프로모션 나를 위한 플리, 벅스로 CHANGE! 더한섬닷컴에서만 가질 수 있는 벅스 무제한 듣기 이용권을 챙겨요. 프로모션기간 : 4.27(목) ~ 5.26(금)" />
              </div>
              <a class="btn" href="https://pay.bugs.co.kr/web/event/thehandsome">벅스 무제한 듣기 이용권 받기</a>
              <img src="https://img.thehandsome.com/md/publish/event/20230424_essential/pc/title04_img.jpg" alt="무제한 듣기 매월 7,900원 > 6,320원 - 6개월간 20% 할인 *모든 기기 재생" />
            </div>
            <!-- //CHANGE 04 -->
            <!-- CHANGE 05 -->
            <div id="motion05" class="motion-cover">
              <div class="title-img">
                <img src="https://img.thehandsome.com/md/publish/event/20230424_essential/pc/title05_fix.png" alt="change 05 떠나요, 더한섬하우스 CHANGE YOUR VIBE! ‘더한섬하우스 부산’에서만 만날 수 있는 오감을 충족하는 전시와 함께 새로운 쇼핑을 경험해요." />
              </div>
              <a class="btn var01" href="https://www.instagram.com/thehandsomehaus/?hl=ko">Change Your Moment 다비드 자맹 작품과 OOTD 인증샷 남기고 한섬 잇-아이템 GET! 바로가기</a>
              <a class="btn var02" href="https://naver.me/FeOEA7ED">Change Your Lucky 지금 방문 예약하고 100% 당첨 럭키드로우 참여! 바로가기</a>
              <a class="btn var03" href="https://www.thehandsome.com/ko/MK/event/10324">더한섬하우스 부산 자세히 보기</a>
              <img src="https://img.thehandsome.com/md/publish/event/20230424_essential/pc/title05_1_img.png" alt=" 프로방스의 댄디보이, 더한섬하우스에 오다 다비드 자맹 전시에 벅스의 뮤직 큐레이션까지 더한 감성충만 더한섬하우스 부산점으로 - 팝업기간 : 5.7(일) ~ 5.31(수)" />
            </div>
            <!-- //CHANGE 05 -->
            <!-- 베너 -->
            <div class="banner-cover">
              <a href="https://www.thehandsome.com/ko/DP/category/326">
                <img src="https://img.thehandsome.com/md/publish/event/20230424_essential/pc/banner_01.jpg" alt="여성 S/S 신상품 보러가기" />
              </a>
              <a href="https://www.thehandsome.com/ko/DP/category/606">
                <img src="https://img.thehandsome.com/md/publish/event/20230424_essential/pc/banner_02.jpg" alt="남성 S/S 신상품 보러가기" />
              </a>
            </div>
            <!-- //베너 -->

          </div>
          
          <style type="text/css">
            .pc-event2023-essential .swiper-wrapper {transition-timing-function: linear;}

            .pc-event2023-essential .motion-cover{display:block; position:relative;}
            .pc-event2023-essential .motion-cover .title-img{position:absolute; left:0; right:0;}
            .pc-event2023-essential .motion-cover .title-img img{margin-top:50px; opacity: 0; width: 62.5%;}
            .pc-event2023-essential .motion-cover.on .title-img img{margin-top:0; opacity: 1; transition: all 0.8s ease;}
            .pc-event2023-essential .motion-cover img{display: block; margin:0 auto; width: 100%;}
            .pc-event2023-essential .motion-cover .btn{position:absolute;left: 50%; transform: translateX(-50%); text-indent: -9999px; font-size: 0; width:21.9%;}
            .pc-event2023-essential .essential-video video{display: block; margin:0 auto; width: 100%;}
            .pc-event2023-essential .banner-cover{display:flex; justify-content: center;}
            .pc-event2023-essential .banner-cover a + a{margin-left:4px;}
            .pc-event2023-essential .floating{position:relative;}
            .pc-event2023-essential .floating .btn{opacity: 0; display: block; position: fixed; bottom: 40px; left: 50%; z-index: 2; transform: translateX(-50%); border-radius: 30px; overflow: hidden; box-shadow: 0 0 6px 0 rgba(0,0,0,.15); transition: opacity 0.25s;}
            .pc-event2023-essential .floating.on .btn{opacity: 1;}

            .pc-event2023-essential .motion-cover#motion01 .title-img{top:9.4%;}
            .pc-event2023-essential .motion-cover#motion01 .btn{bottom: 9.4%; height: 7.1%;}
            .pc-event2023-essential .motion-cover#motion02{padding-top: 17.7%; background: #eaf6e0;}
            .pc-event2023-essential .motion-cover#motion02 .title-img{top:9.9%;}
            .pc-event2023-essential .motion-cover#motion02 .btn{bottom: 10%; height: 7.5%;}
            .pc-event2023-essential .motion-cover#motion03 .title-img{top:8.9%;}
            .pc-event2023-essential .motion-cover#motion04 .title-img{top:11.7%;}
            .pc-event2023-essential .motion-cover#motion04 .btn{bottom: 11.8%; height: 8.8%;}
            .pc-event2023-essential .motion-cover#motion05 .title-img{top:8.2%;}
            .pc-event2023-essential .motion-cover#motion05 .btn.var01{bottom: 28.1%; width: 50%; height: 7.7%;}
            .pc-event2023-essential .motion-cover#motion05 .btn.var02{bottom: 20.5%; width: 50%; height: 7.7%;}
            .pc-event2023-essential .motion-cover#motion05 .btn.var03{bottom: 8.2%; height: 6.2%;}
          </style>

          <!-- <script>

            window.initEvent = function() {
            // TODO: 적용 스크립트 입력
              
            };


          </script> -->
          <!-- <script type="text/javascript" src="https://cdn-img.thehandsome.com/md/publish/event/testJS/test_02.js"></script> -->
          <script>

            new Swiper('#essential-swiper', {
                autoplay: {
                  delay: 0, // 0 보다 크면 list흐를때 스냅이 생긴다
                  disableOnInteraction: false
                },
                speed: 5000, //swiper 흐르는속도
                loop: true,
                loopAdditionalSlides : 1,
                // 슬라이드 반복 시 마지막 슬라이드에서 다음 슬라이드가 보여지지 않는 현상 수정
                allowTouchMove: false, // 터치 방지
                slidesPerView: 4,
                spaceBetween: 0,
                centeredSlides: true,
              })

          </script>
          <!-- html 등록 영역 끝 -->
        </div>
        <div class="swiper-wrap">
          <div class="cmp-sub-tit">
            <h3 class="tit">최신 이벤트</h3>
          </div>
          <div class="cmp-swiper-box btn-large search-swiper">
            <Swiper
              :options="{
                slidesPerView: 5,
                slidesPerGroup : 5,
                spaceBetween: 25,
                navigation: {
                  prevEl: '.planshop-prev-btn',
                  nextEl: '.planshop-next-btn',
                },
              }"
              :class="{'swiper-no-swiping':eventList.list.length <= 5}"
            >
              <SwiperSlide v-for="(item, index) in eventList.list" :key="index">
                <div class="swiper-unit">
                  <nuxt-link to="#none">
                    <v-img src="https://img.thehandsome.com/md/publish/dummy/pc/event/event1.png" aspect-ratio="1" alt="상품 이미지"></v-img>
                    <p class="swiper-title">{{item.title}}</p>
                    <p class="swiper-text">{{item.date}}</p>
                  </nuxt-link>
                </div>
              </SwiperSlide>
            </Swiper>
            <template v-if="eventList.list.length > 5">
              <div slot="button-prev" class="swiper-button-prev swiper-no-swiping planshop-prev-btn"><i v-cmp-icon="{size:32, name:'prev', invert:1}">이전</i></div>
              <div slot="button-next" class="swiper-button-next swiper-no-swiping planshop-next-btn"><i v-cmp-icon="{size:32, name:'next', invert:1}">다음</i></div>
            </template>
          </div>       
        </div>
        <div class="bottom-btn">
          <v-btn large outlined color="primary" class="html-btn gray-outlined">목록</v-btn><!-- [퍼블수정]23.01.26 class gray-outlined 추가 -->
        </div>
      </div>

    </div>
    <script src="/scripts/event-detail-swiper.js"></script><!-- 230224 이벤트 : html script 추가 -->
  </div>
</template>

<script>
import { Swiper, SwiperSlide } from 'vue-awesome-swiper'

export default {
  layout: 'LayoutBasics',
  components : {
    Swiper,
    SwiperSlide,
  },  
  data: () => ({
    eventList : { // swiper data
      list:[
        {
          image : 'https://img.thehandsome.com/md/publish/dummy/pc/event/event1.png',
          title : '앱 다운로드 이벤트',
          date : '2022.12.08 ~ 2022.12.26',
          link : '#n',
        },
        {
          image : 'https://img.thehandsome.com/md/publish/dummy/pc/event/event1.png',
          title : '더한섬닷컴 X 스마일페이 12월 첫 결제',
          date : '2022.12.08 ~ 2022.12.26',
          link : '#n',
        },
        {
          image : 'https://img.thehandsome.com/md/publish/dummy/pc/event/event1.png',
          title : '더한섬닷컴 X 스마일페이 12월 첫 결제 더한섬닷컴 X 스마일페이 12월 첫 결제',
          date : '2022.12.08 ~ 2022.12.26',
          link : '#n',
        },
        {
          image : 'https://img.thehandsome.com/md/publish/dummy/pc/event/event1.png',
          title : '앱 다운로드 이벤트',
          date : '2022.12.08 ~ 2022.12.26',
          link : '#n',
        },
        {
          image : 'https://img.thehandsome.com/md/publish/dummy/pc/event/event1.png',
          title : '더한섬닷컴 X 스마일페이 12월 첫 결제',
          date : '2022.12.08 ~ 2022.12.26',
          link : '#n',
        },
        {
          image : 'https://img.thehandsome.com/md/publish/dummy/pc/event/event1.png',
          title : '더한섬닷컴 X 스마일페이 12월 첫 결제',
          date : '2022.12.08 ~ 2022.12.26',
          link : '#n',
        },
        {
          image : 'https://img.thehandsome.com/md/publish/dummy/pc/event/event1.png',
          title : '앱 다운로드 이벤트',
          date : '2022.12.08 ~ 2022.12.26',
          link : '#n',
        },
        {
          image : 'https://img.thehandsome.com/md/publish/dummy/pc/event/event1.png',
          title : '더한섬닷컴 X 스마일페이 12월 첫 결제',
          date : '2022.12.08 ~ 2022.12.26',
          link : '#n',
        },
        {
          image : 'https://img.thehandsome.com/md/publish/dummy/pc/event/event1.png',
          title : '더한섬닷컴 X 스마일페이 12월 첫 결제',
          date : '2022.12.08 ~ 2022.12.26',
          link : '#n',
        },
        {
          image : 'https://img.thehandsome.com/md/publish/dummy/pc/event/event1.png',
          title : '앱 다운로드 이벤트',
          date : '2022.12.08 ~ 2022.12.26',
          link : '#n',
        },
        {
          image : 'https://img.thehandsome.com/md/publish/dummy/pc/event/event1.png',
          title : '더한섬닷컴 X 스마일페이 12월 첫 결제',
          date : '2022.12.08 ~ 2022.12.26',
          link : '#n',
        },
        {
          image : 'https://img.thehandsome.com/md/publish/dummy/pc/event/event1.png',
          title : '더한섬닷컴 X 스마일페이 12월 첫 결제',
          date : '2022.12.08 ~ 2022.12.26',
          link : '#n',
        },
      ],
    },         
  }),
  mounted() {
    window.addEventListener('scroll', function() {
      // 각 모션 요소 선택
      const motion01 = document.querySelector('#motion01');
      const motion02 = document.querySelector('#motion02');
      const motion03 = document.querySelector('#motion03');
      const motion04 = document.querySelector('#motion04');
      const motion05 = document.querySelector('#motion05');

      // 요소가 화면 중앙에 있을 때
      if (isElementInMiddle(motion01)) {
        motion01.classList.add('on');
      }
      if (isElementInMiddle(motion02)) {
        motion02.classList.add('on');
      }
      if (isElementInMiddle(motion03)) {
        motion03.classList.add('on');
      }
      if (isElementInMiddle(motion04)) {
        motion04.classList.add('on');
      }
      if (isElementInMiddle(motion05)) {
        motion05.classList.add('on');
      }
    });
    
    // 요소가 화면 중앙에 있는지 체크하는 함수
    function isElementInMiddle(element) {
      const rect = element.getBoundingClientRect();
      const middle = (window.innerHeight || document.documentElement.clientHeight) / 1.7;

      return (
        rect.top <= middle &&
        rect.bottom >= middle
      );
    }

    const video = document.querySelector('.essential-video');
    const floating = document.querySelector('.floating');
    const observer = new IntersectionObserver(function(entries) {
      if (entries[0].isIntersecting) {
        floating.classList.remove('on');
      } else {
        floating.classList.add('on');
      }
    }, { threshold: 0.2 });

    observer.observe(video);
  },
  methods: {
  },
}
</script>
<style lang="scss">
 @import '@/assets/scss/pages/event.scss'; 
</style>
